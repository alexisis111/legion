# Настройка Telegram-бота для формы обратной связи

Для того чтобы форма обратной связи на сайте могла отправлять сообщения в Telegram, необходимо выполнить следующие шаги:

## 1. Создание Telegram-бота

1. Найдите в Telegram бота @BotFather
2. Отправьте ему команду `/newbot`
3. Следуйте инструкциям для создания нового бота:
   - Придумайте имя для бота
   - Придумайте username (должен заканчиваться на `bot`)
4. После создания BotFather предоставит вам **токен** для бота, который будет выглядеть примерно так:
   ```
   1234567890:ABCdefGhIJKlmNoPQRsTUVwxyz
   ```

## 2. Получение ID чата

1. Найдите в Telegram бота @userinfobot
2. Отправьте ему любое сообщение
3. Он ответит информацией о вашем аккаунте, включая **ID чата**, который будет выглядеть примерно так:
   ```
   123456789
   ```

## 3. Настройка переменных окружения на Netlify

1. Войдите в ваш аккаунт на [Netlify](https://app.netlify.com/)
2. Перейдите в настройки вашего сайта
3. Перейдите в раздел "Build & deploy" → "Environment"
4. Добавьте следующие переменные:

   ```
   TELEGRAM_BOT_TOKEN=ваш_токен_бота
   TELEGRAM_CHAT_ID=ваш_id_чата
   ```

## 4. Структура файлов

Netlify функция для обработки запросов находится в файле:
```
/netlify/functions/telegram-webhook.ts
```

Эта функция автоматически развернется как API endpoint по адресу:
```
/.netlify/functions/telegram-webhook
```

## 5. Перезапустите деплой

После добавления переменных окружения перезапустите деплой вашего сайта, чтобы изменения вступили в силу.

## 6. Диагностика проблем

Если форма по-прежнему не работает:

1. Проверьте, что переменные окружения корректно установлены на Netlify
2. Убедитесь, что бот активен и не заблокирован
3. Проверьте, что ID чата указан правильно
4. Убедитесь, что бот добавлен в чат, если вы используете групповой чат
5. Проверьте логи Netlify для получения дополнительной информации об ошибках

## Важные замечания

- Никогда не публикуйте токен бота в открытом виде
- Только администраторы чата могут получить ID чата напрямую
- Бот может отправлять сообщения только в чаты, куда его пригласили

Теперь форма обратной связи на вашем сайте сможет отправлять сообщения в Telegram!